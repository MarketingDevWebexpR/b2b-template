{"version":3,"sources":["../src/errors.ts","../src/client.ts"],"names":[],"mappings":"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","file":"chunk-KPPB5KWR.cjs","sourcesContent":["/**\n * Custom error classes for API operations\n */\n\n/**\n * Base error class for all API-related errors\n */\nexport class ApiError extends Error {\n  public override readonly name: string = \"ApiError\";\n  public readonly statusCode: number;\n  public readonly code: string;\n  public readonly details?: unknown;\n\n  constructor(\n    message: string,\n    options: {\n      statusCode?: number;\n      code?: string;\n      details?: unknown;\n      cause?: Error;\n    } = {}\n  ) {\n    super(message, { cause: options.cause });\n    this.statusCode = options.statusCode ?? 500;\n    this.code = options.code ?? \"UNKNOWN_ERROR\";\n    this.details = options.details;\n\n    // Maintains proper stack trace for where error was thrown\n    Error.captureStackTrace?.(this, this.constructor);\n  }\n\n  toJSON(): Record<string, unknown> {\n    return {\n      name: this.name,\n      message: this.message,\n      statusCode: this.statusCode,\n      code: this.code,\n      details: this.details,\n    };\n  }\n}\n\n/**\n * Error thrown when a network request fails\n */\nexport class NetworkError extends ApiError {\n  public override readonly name = \"NetworkError\";\n\n  constructor(message: string, cause?: Error) {\n    super(message, {\n      statusCode: 0,\n      code: \"NETWORK_ERROR\",\n      cause,\n    });\n  }\n}\n\n/**\n * Error thrown when authentication fails\n */\nexport class AuthenticationError extends ApiError {\n  public override readonly name = \"AuthenticationError\";\n\n  constructor(message = \"Authentication failed\") {\n    super(message, {\n      statusCode: 401,\n      code: \"AUTHENTICATION_ERROR\",\n    });\n  }\n}\n\n/**\n * Error thrown when authorization fails\n */\nexport class AuthorizationError extends ApiError {\n  public override readonly name = \"AuthorizationError\";\n\n  constructor(message = \"Access denied\") {\n    super(message, {\n      statusCode: 403,\n      code: \"AUTHORIZATION_ERROR\",\n    });\n  }\n}\n\n/**\n * Error thrown when a resource is not found\n */\nexport class NotFoundError extends ApiError {\n  public override readonly name = \"NotFoundError\";\n\n  constructor(resource: string, identifier?: string) {\n    const message = identifier\n      ? `${resource} with identifier '${identifier}' not found`\n      : `${resource} not found`;\n\n    super(message, {\n      statusCode: 404,\n      code: \"NOT_FOUND\",\n      details: { resource, identifier },\n    });\n  }\n}\n\n/**\n * Error thrown when validation fails\n */\nexport class ValidationError extends ApiError {\n  public override readonly name = \"ValidationError\";\n  public readonly errors: readonly ValidationFieldError[];\n\n  constructor(message: string, errors: readonly ValidationFieldError[] = []) {\n    super(message, {\n      statusCode: 400,\n      code: \"VALIDATION_ERROR\",\n      details: { errors },\n    });\n    this.errors = errors;\n  }\n}\n\n/**\n * Individual field validation error\n */\nexport interface ValidationFieldError {\n  readonly field: string;\n  readonly message: string;\n  readonly code?: string;\n}\n\n/**\n * Error thrown when rate limit is exceeded\n */\nexport class RateLimitError extends ApiError {\n  public override readonly name = \"RateLimitError\";\n  public readonly retryAfter?: number;\n\n  constructor(retryAfter?: number) {\n    super(\"Rate limit exceeded\", {\n      statusCode: 429,\n      code: \"RATE_LIMIT_EXCEEDED\",\n      details: { retryAfter },\n    });\n    this.retryAfter = retryAfter;\n  }\n}\n\n/**\n * Error thrown when request times out\n */\nexport class TimeoutError extends ApiError {\n  public override readonly name = \"TimeoutError\";\n\n  constructor(timeoutMs: number) {\n    super(`Request timed out after ${timeoutMs}ms`, {\n      statusCode: 408,\n      code: \"TIMEOUT\",\n      details: { timeoutMs },\n    });\n  }\n}\n\n/**\n * Type guard to check if an error is an ApiError\n */\nexport function isApiError(error: unknown): error is ApiError {\n  return error instanceof ApiError;\n}\n\n/**\n * Type guard to check if an error is a specific type of ApiError\n */\nexport function isApiErrorWithCode<T extends ApiError>(\n  error: unknown,\n  code: string\n): error is T {\n  return isApiError(error) && error.code === code;\n}\n","/**\n * Base API client implementation\n */\n\nimport type {\n  ApiClientConfig,\n  ApiResponse,\n  HttpMethod,\n  RequestOptions,\n} from \"./types\";\nimport {\n  ApiError,\n  AuthenticationError,\n  AuthorizationError,\n  NetworkError,\n  NotFoundError,\n  RateLimitError,\n  TimeoutError,\n} from \"./errors\";\n\n/**\n * Default configuration values\n */\nconst DEFAULT_TIMEOUT = 30_000; // 30 seconds\n\n/**\n * Base API client that all adapters can extend\n */\nexport class BaseApiClient {\n  protected readonly config: ApiClientConfig;\n  protected readonly fetchFn: typeof globalThis.fetch;\n\n  constructor(config: ApiClientConfig) {\n    this.config = {\n      ...config,\n      timeout: config.timeout ?? DEFAULT_TIMEOUT,\n    };\n    this.fetchFn = config.fetch ?? globalThis.fetch.bind(globalThis);\n  }\n\n  /**\n   * Build the full URL with query parameters\n   */\n  protected buildUrl(\n    path: string,\n    params?: RequestOptions[\"params\"]\n  ): string {\n    const url = new URL(path, this.config.baseUrl);\n\n    if (params) {\n      for (const [key, value] of Object.entries(params)) {\n        if (value !== undefined) {\n          url.searchParams.set(key, String(value));\n        }\n      }\n    }\n\n    return url.toString();\n  }\n\n  /**\n   * Build headers for the request\n   */\n  protected buildHeaders(\n    customHeaders?: RequestOptions[\"headers\"]\n  ): Headers {\n    const headers = new Headers({\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\",\n      ...this.config.defaultHeaders,\n      ...customHeaders,\n    });\n\n    if (this.config.authToken) {\n      headers.set(\"Authorization\", `Bearer ${this.config.authToken}`);\n    }\n\n    return headers;\n  }\n\n  /**\n   * Handle HTTP error responses\n   */\n  protected handleErrorResponse(status: number, body: unknown): never {\n    const message =\n      typeof body === \"object\" && body !== null && \"message\" in body\n        ? String((body as { message: unknown }).message)\n        : `Request failed with status ${status}`;\n\n    switch (status) {\n      case 401:\n        throw new AuthenticationError(message);\n      case 403:\n        throw new AuthorizationError(message);\n      case 404:\n        throw new NotFoundError(\"Resource\", undefined);\n      case 429: {\n        const retryAfter =\n          typeof body === \"object\" &&\n          body !== null &&\n          \"retryAfter\" in body &&\n          typeof (body as { retryAfter: unknown }).retryAfter === \"number\"\n            ? (body as { retryAfter: number }).retryAfter\n            : undefined;\n        throw new RateLimitError(retryAfter);\n      }\n      default:\n        throw new ApiError(message, {\n          statusCode: status,\n          code: \"HTTP_ERROR\",\n          details: body,\n        });\n    }\n  }\n\n  /**\n   * Execute an HTTP request\n   */\n  protected async request<T>(\n    method: HttpMethod,\n    path: string,\n    options: RequestOptions & { body?: unknown } = {}\n  ): Promise<ApiResponse<T>> {\n    const { headers, params, timeout, signal, body } = options;\n    const url = this.buildUrl(path, params);\n    const requestHeaders = this.buildHeaders(headers);\n\n    // Create timeout controller if needed\n    const timeoutMs = timeout ?? this.config.timeout ?? DEFAULT_TIMEOUT;\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), timeoutMs);\n\n    // Combine abort signals\n    const combinedSignal = signal\n      ? AbortSignal.any([signal, controller.signal])\n      : controller.signal;\n\n    try {\n      const requestInit: RequestInit = {\n        method,\n        headers: requestHeaders,\n        signal: combinedSignal,\n      };\n\n      if (body !== undefined) {\n        requestInit.body = JSON.stringify(body);\n      }\n\n      const response = await this.fetchFn(url, requestInit);\n\n      clearTimeout(timeoutId);\n\n      // Try to parse response body\n      let responseBody: unknown;\n      const contentType = response.headers.get(\"content-type\");\n\n      if (contentType?.includes(\"application/json\")) {\n        responseBody = await response.json();\n      } else {\n        responseBody = await response.text();\n      }\n\n      if (!response.ok) {\n        this.handleErrorResponse(response.status, responseBody);\n      }\n\n      return {\n        data: responseBody as T,\n        status: response.status,\n        headers: response.headers,\n      };\n    } catch (error) {\n      clearTimeout(timeoutId);\n\n      if (error instanceof ApiError) {\n        throw error;\n      }\n\n      if (error instanceof Error) {\n        if (error.name === \"AbortError\") {\n          throw new TimeoutError(timeoutMs);\n        }\n\n        throw new NetworkError(error.message, error);\n      }\n\n      throw new NetworkError(\"Unknown network error\");\n    }\n  }\n\n  /**\n   * HTTP GET request\n   */\n  async get<T>(path: string, options?: RequestOptions): Promise<ApiResponse<T>> {\n    return this.request<T>(\"GET\", path, options);\n  }\n\n  /**\n   * HTTP POST request\n   */\n  async post<T>(\n    path: string,\n    body?: unknown,\n    options?: RequestOptions\n  ): Promise<ApiResponse<T>> {\n    return this.request<T>(\"POST\", path, { ...options, body });\n  }\n\n  /**\n   * HTTP PUT request\n   */\n  async put<T>(\n    path: string,\n    body?: unknown,\n    options?: RequestOptions\n  ): Promise<ApiResponse<T>> {\n    return this.request<T>(\"PUT\", path, { ...options, body });\n  }\n\n  /**\n   * HTTP PATCH request\n   */\n  async patch<T>(\n    path: string,\n    body?: unknown,\n    options?: RequestOptions\n  ): Promise<ApiResponse<T>> {\n    return this.request<T>(\"PATCH\", path, { ...options, body });\n  }\n\n  /**\n   * HTTP DELETE request\n   */\n  async delete<T>(\n    path: string,\n    options?: RequestOptions\n  ): Promise<ApiResponse<T>> {\n    return this.request<T>(\"DELETE\", path, options);\n  }\n}\n"]}