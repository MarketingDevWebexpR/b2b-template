{"version":3,"sources":["../src/mappers/product.ts","../src/mappers/cart.ts","../src/services/products.ts","../src/services/cart.ts","../src/client.ts","../src/index.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["/**\n * Product Mappers\n *\n * Transform Medusa product data to domain types.\n */\n\nimport type { Product, Category } from \"@maison/types\";\n\n/**\n * Medusa product response type\n */\nexport interface MedusaProduct {\n  id: string;\n  title: string;\n  handle: string;\n  description: string | null;\n  subtitle: string | null;\n  thumbnail: string | null;\n  images?: Array<{ url: string; id: string }>;\n  variants?: MedusaVariant[];\n  collection?: MedusaCollection | null;\n  collection_id: string | null;\n  categories?: MedusaCategory[];\n  status: \"draft\" | \"proposed\" | \"published\" | \"rejected\";\n  weight: number | null;\n  origin_country: string | null;\n  metadata?: Record<string, unknown> | null;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface MedusaVariant {\n  id: string;\n  title: string;\n  sku: string | null;\n  barcode: string | null;\n  prices?: MedusaPrice[];\n  inventory_quantity?: number;\n  manage_inventory: boolean;\n}\n\nexport interface MedusaPrice {\n  id: string;\n  amount: number;\n  currency_code: string;\n  region_id?: string;\n}\n\nexport interface MedusaCollection {\n  id: string;\n  title: string;\n  handle: string;\n}\n\nexport interface MedusaCategory {\n  id: string;\n  name: string;\n  handle: string;\n  parent_category_id: string | null;\n  category_children?: MedusaCategory[];\n}\n\n/**\n * Map Medusa product to domain Product type.\n *\n * @param medusaProduct - Medusa product response\n * @param regionId - Region ID for price selection\n * @param currencyCode - Currency code for price selection\n * @returns Mapped Product\n *\n * @example\n * ```typescript\n * const product = mapMedusaProduct(medusaProduct, \"reg_123\", \"EUR\");\n * ```\n */\nexport function mapMedusaProduct(\n  medusaProduct: MedusaProduct,\n  regionId?: string,\n  currencyCode = \"EUR\"\n): Product {\n  const images = medusaProduct.images?.map((img) => img.url) ?? [];\n  if (medusaProduct.thumbnail && !images.includes(medusaProduct.thumbnail)) {\n    images.unshift(medusaProduct.thumbnail);\n  }\n\n  // Get default variant for pricing\n  const defaultVariant = medusaProduct.variants?.[0];\n  const price = getVariantPrice(defaultVariant, regionId, currencyCode);\n\n  // Get primary category\n  const primaryCategory = medusaProduct.categories?.[0];\n\n  return {\n    id: medusaProduct.id,\n    reference: defaultVariant?.sku ?? medusaProduct.id,\n    name: medusaProduct.title,\n    nameEn: medusaProduct.title, // Medusa doesn't have separate i18n by default\n    slug: medusaProduct.handle,\n    ean: defaultVariant?.barcode ?? undefined,\n    description: medusaProduct.description ?? \"\",\n    shortDescription: medusaProduct.subtitle ?? \"\",\n    price: price / 100, // Medusa stores in cents\n    isPriceTTC: false, // Medusa prices are typically HT\n    images,\n    categoryId: primaryCategory?.id ?? medusaProduct.collection_id ?? \"\",\n    category: primaryCategory ? mapMedusaCategory(primaryCategory) : undefined,\n    collection: medusaProduct.collection?.title,\n    materials: extractMaterials(medusaProduct.metadata),\n    weight: medusaProduct.weight ?? undefined,\n    weightUnit: \"g\",\n    brand: extractBrand(medusaProduct.metadata),\n    origin: medusaProduct.origin_country ?? undefined,\n    stock: defaultVariant?.inventory_quantity ?? 0,\n    isAvailable: medusaProduct.status === \"published\",\n    featured: extractFeatured(medusaProduct.metadata),\n    isNew: isProductNew(medusaProduct.created_at),\n    createdAt: medusaProduct.created_at,\n  };\n}\n\n/**\n * Get variant price for specific region/currency.\n */\nfunction getVariantPrice(\n  variant: MedusaVariant | undefined,\n  regionId?: string,\n  currencyCode = \"EUR\"\n): number {\n  if (!variant?.prices?.length) return 0;\n\n  // Try to find price for specific region first\n  if (regionId) {\n    const regionPrice = variant.prices.find((p) => p.region_id === regionId);\n    if (regionPrice) return regionPrice.amount;\n  }\n\n  // Fall back to currency code\n  const currencyPrice = variant.prices.find(\n    (p) => p.currency_code === currencyCode.toLowerCase()\n  );\n  if (currencyPrice) return currencyPrice.amount;\n\n  // Return first available price\n  return variant.prices[0]?.amount ?? 0;\n}\n\n/**\n * Map Medusa category to domain Category type.\n */\nexport function mapMedusaCategory(medusaCategory: MedusaCategory): Category {\n  return {\n    id: medusaCategory.id,\n    code: medusaCategory.handle,\n    name: medusaCategory.name,\n    slug: medusaCategory.handle,\n    description: \"\",\n    image: \"\",\n    productCount: 0,\n  };\n}\n\n/**\n * Extract materials from product metadata.\n */\nfunction extractMaterials(metadata?: Record<string, unknown> | null): string[] {\n  if (!metadata) return [];\n  const materials = metadata[\"materials\"];\n  if (!materials) return [];\n  if (Array.isArray(materials)) {\n    return materials.filter((m): m is string => typeof m === \"string\");\n  }\n  if (typeof materials === \"string\") {\n    return [materials];\n  }\n  return [];\n}\n\n/**\n * Extract brand from product metadata.\n */\nfunction extractBrand(metadata?: Record<string, unknown> | null): string | undefined {\n  if (!metadata) return undefined;\n  const brand = metadata[\"brand\"];\n  if (typeof brand === \"string\") {\n    return brand;\n  }\n  return undefined;\n}\n\n/**\n * Extract featured flag from product metadata.\n */\nfunction extractFeatured(metadata?: Record<string, unknown> | null): boolean {\n  if (!metadata) return false;\n  return metadata[\"featured\"] === true;\n}\n\n/**\n * Check if product is considered \"new\" (less than 30 days old).\n */\nfunction isProductNew(createdAt: string): boolean {\n  const created = new Date(createdAt);\n  const thirtyDaysAgo = new Date();\n  thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n  return created > thirtyDaysAgo;\n}\n","/**\n * Cart Mappers\n *\n * Transform Medusa cart data to domain types.\n */\n\nimport type {\n  Cart,\n  CartLineItem,\n  CartTotals,\n  CartDiscount,\n  CartShippingOption,\n} from \"@maison/api-client\";\n\n/**\n * Medusa cart response type\n */\nexport interface MedusaCart {\n  id: string;\n  email: string | null;\n  customer_id: string | null;\n  region_id: string;\n  currency_code: string;\n  items: MedusaLineItem[];\n  shipping_methods?: MedusaShippingMethod[];\n  shipping_address?: MedusaAddress | null;\n  billing_address?: MedusaAddress | null;\n  discounts?: MedusaDiscount[];\n  subtotal: number;\n  shipping_total: number;\n  tax_total: number;\n  discount_total: number;\n  total: number;\n  metadata?: Record<string, unknown>;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface MedusaLineItem {\n  id: string;\n  cart_id: string;\n  variant_id: string;\n  product_id: string;\n  title: string;\n  description: string | null;\n  thumbnail: string | null;\n  quantity: number;\n  unit_price: number;\n  original_price?: number;\n  subtotal: number;\n  total: number;\n  variant?: {\n    id: string;\n    sku: string | null;\n    inventory_quantity?: number;\n    product?: {\n      id: string;\n      title: string;\n      handle: string;\n    };\n  };\n  metadata?: Record<string, string>;\n}\n\nexport interface MedusaShippingMethod {\n  id: string;\n  shipping_option_id: string;\n  price: number;\n  shipping_option?: {\n    id: string;\n    name: string;\n    amount: number;\n    provider_id?: string;\n  };\n}\n\nexport interface MedusaAddress {\n  id: string;\n  first_name: string | null;\n  last_name: string | null;\n  address_1: string | null;\n  address_2: string | null;\n  city: string | null;\n  postal_code: string | null;\n  country_code: string | null;\n  phone: string | null;\n}\n\nexport interface MedusaDiscount {\n  id: string;\n  code: string;\n  rule: {\n    type: \"fixed\" | \"percentage\" | \"free_shipping\";\n    value: number;\n    description?: string;\n  };\n}\n\nexport interface MedusaShippingOption {\n  id: string;\n  name: string;\n  amount: number;\n  price_type: \"flat_rate\" | \"calculated\";\n  provider_id?: string;\n}\n\n/**\n * Map Medusa cart to domain Cart type.\n *\n * @param medusaCart - Medusa cart response\n * @returns Mapped Cart\n *\n * @example\n * ```typescript\n * const cart = mapMedusaCart(medusaCart);\n * ```\n */\nexport function mapMedusaCart(medusaCart: MedusaCart): Cart {\n  const items = medusaCart.items.map(mapMedusaLineItem);\n  const totals = mapMedusaTotals(medusaCart, items);\n\n  // Map selected shipping method if present\n  const selectedShipping = medusaCart.shipping_methods?.[0];\n  const shippingOption: CartShippingOption | undefined = selectedShipping?.shipping_option\n    ? {\n        id: selectedShipping.shipping_option.id,\n        carrier: selectedShipping.shipping_option.provider_id ?? \"standard\",\n        name: selectedShipping.shipping_option.name,\n        price: selectedShipping.price / 100,\n      }\n    : undefined;\n\n  return {\n    id: medusaCart.id,\n    customerId: medusaCart.customer_id ?? undefined,\n    regionId: medusaCart.region_id,\n    items,\n    discounts: medusaCart.discounts?.map(mapMedusaDiscount) ?? [],\n    shippingOption,\n    totals,\n    shippingAddressId: medusaCart.shipping_address?.id,\n    billingAddressId: medusaCart.billing_address?.id,\n    metadata: medusaCart.metadata,\n    createdAt: medusaCart.created_at,\n    updatedAt: medusaCart.updated_at,\n  };\n}\n\n/**\n * Map Medusa line item to domain CartLineItem.\n */\nexport function mapMedusaLineItem(item: MedusaLineItem): CartLineItem {\n  const unitPrice = item.unit_price / 100;\n  const originalPrice = item.original_price ? item.original_price / 100 : undefined;\n  const discountAmount = originalPrice && originalPrice > unitPrice\n    ? originalPrice - unitPrice\n    : undefined;\n\n  return {\n    id: item.id,\n    productId: item.product_id,\n    variantId: item.variant_id,\n    sku: item.variant?.sku ?? \"\",\n    name: item.title,\n    imageUrl: item.thumbnail ?? undefined,\n    unitPrice,\n    quantity: item.quantity,\n    lineTotal: item.total / 100,\n    originalPrice,\n    discountAmount,\n    isAvailable: true, // Medusa items are available if they're in cart\n    availableStock: item.variant?.inventory_quantity,\n    attributes: item.metadata,\n    productSlug: item.variant?.product?.handle,\n  };\n}\n\n/**\n * Map Medusa discount to domain CartDiscount.\n */\nexport function mapMedusaDiscount(discount: MedusaDiscount): CartDiscount {\n  return {\n    id: discount.id,\n    code: discount.code,\n    type: discount.rule.type,\n    value: discount.rule.value,\n    amount: 0, // Will be calculated by Medusa in the totals\n    description: discount.rule.description,\n  };\n}\n\n/**\n * Map Medusa cart totals to domain CartTotals.\n */\nexport function mapMedusaTotals(cart: MedusaCart, items: CartLineItem[]): CartTotals {\n  return {\n    subtotal: cart.subtotal / 100,\n    discount: cart.discount_total / 100,\n    shipping: cart.shipping_total / 100,\n    tax: cart.tax_total / 100,\n    total: cart.total / 100,\n    currency: cart.currency_code.toUpperCase(),\n    itemCount: items.reduce((acc, item) => acc + item.quantity, 0),\n    uniqueItemCount: items.length,\n  };\n}\n\n/**\n * Map Medusa shipping options to domain CartShippingOption array.\n */\nexport function mapMedusaShippingOptions(\n  options: MedusaShippingOption[]\n): CartShippingOption[] {\n  return options.map((opt) => ({\n    id: opt.id,\n    carrier: opt.provider_id ?? \"standard\",\n    name: opt.name,\n    price: opt.amount / 100,\n    estimatedDays: undefined, // Medusa doesn't provide this by default\n  }));\n}\n","/**\n * Medusa Product Service\n *\n * Implements IProductService for Medusa V2 backend.\n */\n\nimport type {\n  IProductService,\n  ListProductsOptions,\n  GetProductOptions,\n  ProductWithRelated,\n  ProductSearchResult,\n  ProductFacets,\n  ProductInventory,\n} from \"@maison/api-client\";\nimport type { Product } from \"@maison/types\";\nimport type { PaginatedResponse, BaseApiClient } from \"@maison/api-core\";\nimport { mapMedusaProduct, type MedusaProduct, type MedusaCategory } from \"../mappers\";\n\n/**\n * Medusa API response wrapper\n */\ninterface MedusaResponse<T> {\n  products?: T[];\n  product?: T;\n  categories?: MedusaCategory[];\n  count?: number;\n  offset?: number;\n  limit?: number;\n}\n\n/**\n * Medusa Product Service implementation.\n *\n * @example\n * ```typescript\n * const productService = new MedusaProductService(httpClient, \"reg_123\");\n * const products = await productService.list({ pageSize: 20 });\n * ```\n */\nexport class MedusaProductService implements IProductService {\n  constructor(\n    private readonly client: BaseApiClient,\n    private readonly regionId?: string,\n    private readonly currencyCode = \"EUR\"\n  ) {}\n\n  /**\n   * List products with filtering, sorting, and pagination.\n   */\n  async list(options: ListProductsOptions = {}): Promise<PaginatedResponse<Product>> {\n    const {\n      page = 1,\n      pageSize = 20,\n      categoryId,\n      collection,\n      search,\n      sortBy = \"createdAt\",\n      sortOrder = \"desc\",\n      minPrice,\n      maxPrice,\n    } = options;\n\n    const offset = (page - 1) * pageSize;\n\n    // Map sortBy to Medusa field names\n    const sortFieldMap: Record<string, string> = {\n      createdAt: \"created_at\",\n      price: \"price\",\n      name: \"title\",\n      popularity: \"created_at\", // Medusa doesn't have popularity, fallback to created_at\n    };\n    const medusaSortBy = sortFieldMap[sortBy] ?? \"created_at\";\n\n    // Build query parameters\n    const params = new URLSearchParams();\n    params.set(\"offset\", offset.toString());\n    params.set(\"limit\", pageSize.toString());\n    params.set(\"order\", sortOrder === \"asc\" ? medusaSortBy : `-${medusaSortBy}`);\n\n    if (categoryId) params.set(\"category_id[]\", categoryId);\n    if (collection) params.set(\"collection_id[]\", collection);\n    if (search) params.set(\"q\", search);\n\n    // Note: Medusa doesn't support price filtering directly in store API\n    // This would need to be handled client-side or via custom endpoint\n\n    const response = await this.client.get<MedusaResponse<MedusaProduct>>(\n      `/store/products?${params.toString()}`\n    );\n\n    const products = (response.data.products ?? []).map((p: MedusaProduct) =>\n      mapMedusaProduct(p, this.regionId, this.currencyCode)\n    );\n\n    // Apply client-side price filtering if needed\n    let filteredProducts = products;\n    if (minPrice !== undefined || maxPrice !== undefined) {\n      filteredProducts = products.filter((p) => {\n        if (minPrice !== undefined && p.price < minPrice) return false;\n        if (maxPrice !== undefined && p.price > maxPrice) return false;\n        return true;\n      });\n    }\n\n    const total = response.data.count ?? products.length;\n    const totalPages = Math.ceil(total / pageSize);\n\n    return {\n      items: filteredProducts,\n      total,\n      page,\n      pageSize,\n      hasNextPage: page < totalPages,\n      hasPreviousPage: page > 1,\n    };\n  }\n\n  /**\n   * Get a single product by ID with optional related products.\n   */\n  async get(id: string, options: GetProductOptions = {}): Promise<ProductWithRelated> {\n    const product = await this.fetchProduct(id);\n\n    if (!product) {\n      throw new Error(`Product not found: ${id}`);\n    }\n\n    // Fetch related products if requested\n    let relatedProducts: Product[] | undefined;\n    if (options.includeRelated && product.categoryId) {\n      const related = await this.list({\n        categoryId: product.categoryId,\n        pageSize: options.relatedLimit ?? 4,\n      });\n      relatedProducts = related.items.filter((p) => p.id !== product.id).slice(0, options.relatedLimit ?? 4);\n    }\n\n    return {\n      ...product,\n      relatedProducts,\n    };\n  }\n\n  /**\n   * Get a product by slug/handle.\n   */\n  async getBySlug(slug: string, options: GetProductOptions = {}): Promise<ProductWithRelated> {\n    const listResponse = await this.client.get<MedusaResponse<MedusaProduct>>(\n      `/store/products?handle=${slug}`\n    );\n\n    const medusaProduct = listResponse.data.products?.[0];\n    if (!medusaProduct) {\n      throw new Error(`Product not found with slug: ${slug}`);\n    }\n\n    const product = mapMedusaProduct(medusaProduct, this.regionId, this.currencyCode);\n\n    // Fetch related products if requested\n    let relatedProducts: Product[] | undefined;\n    if (options.includeRelated && product.categoryId) {\n      const related = await this.list({\n        categoryId: product.categoryId,\n        pageSize: options.relatedLimit ?? 4,\n      });\n      relatedProducts = related.items.filter((p) => p.id !== product.id).slice(0, options.relatedLimit ?? 4);\n    }\n\n    return {\n      ...product,\n      relatedProducts,\n    };\n  }\n\n  /**\n   * Get a product by SKU/reference.\n   */\n  async getBySku(sku: string, options: GetProductOptions = {}): Promise<ProductWithRelated> {\n    // Medusa doesn't have a direct SKU search, so we search and filter\n    const listResponse = await this.client.get<MedusaResponse<MedusaProduct>>(\n      `/store/products?q=${sku}`\n    );\n\n    const medusaProduct = listResponse.data.products?.find(\n      (p) => p.variants?.some((v) => v.sku === sku)\n    );\n\n    if (!medusaProduct) {\n      throw new Error(`Product not found with SKU: ${sku}`);\n    }\n\n    const product = mapMedusaProduct(medusaProduct, this.regionId, this.currencyCode);\n\n    // Fetch related products if requested\n    let relatedProducts: Product[] | undefined;\n    if (options.includeRelated && product.categoryId) {\n      const related = await this.list({\n        categoryId: product.categoryId,\n        pageSize: options.relatedLimit ?? 4,\n      });\n      relatedProducts = related.items.filter((p) => p.id !== product.id).slice(0, options.relatedLimit ?? 4);\n    }\n\n    return {\n      ...product,\n      relatedProducts,\n    };\n  }\n\n  /**\n   * Search products by query.\n   */\n  async search(\n    query: string,\n    options: ListProductsOptions = {}\n  ): Promise<ProductSearchResult> {\n    const response = await this.list({\n      ...options,\n      search: query,\n    });\n\n    // Get facets from results\n    const facets = await this.getFacetsFromProducts(response.items as Product[]);\n\n    return {\n      products: response.items as Product[],\n      facets,\n      total: response.total,\n      suggestions: [], // Would need separate endpoint for suggestions\n    };\n  }\n\n  /**\n   * Get multiple products by IDs.\n   */\n  async getMany(ids: string[]): Promise<Product[]> {\n    const products = await Promise.all(\n      ids.map((id) => this.fetchProduct(id).catch(() => null))\n    );\n    return products.filter((p): p is Product => p !== null);\n  }\n\n  /**\n   * Get featured products.\n   */\n  async getFeatured(limit = 10): Promise<Product[]> {\n    // Medusa doesn't have built-in featured flag\n    // This would need custom metadata or a specific collection\n    const response = await this.list({ pageSize: limit });\n    return (response.items as Product[]).filter((p) => p.featured);\n  }\n\n  /**\n   * Get new products.\n   */\n  async getNew(limit = 10, daysBack = 30): Promise<Product[]> {\n    const response = await this.list({\n      pageSize: limit,\n      sortBy: \"createdAt\",\n      sortOrder: \"desc\",\n    });\n\n    // Filter by date if daysBack is specified\n    const cutoffDate = new Date();\n    cutoffDate.setDate(cutoffDate.getDate() - daysBack);\n\n    return (response.items as Product[]).filter((p) => {\n      const productDate = new Date(p.createdAt);\n      return productDate >= cutoffDate;\n    });\n  }\n\n  /**\n   * Get products by category.\n   */\n  async getByCategory(\n    categoryId: string,\n    options?: Omit<ListProductsOptions, \"categoryId\">\n  ): Promise<PaginatedResponse<Product>> {\n    return this.list({ ...options, categoryId });\n  }\n\n  /**\n   * Get product inventory/stock information.\n   */\n  async getInventory(productId: string): Promise<ProductInventory> {\n    const product = await this.fetchProduct(productId);\n\n    return {\n      productId,\n      sku: product?.reference ?? \"\",\n      available: product?.stock ?? 0,\n      reserved: 0, // Medusa doesn't expose reserved stock in store API\n    };\n  }\n\n  /**\n   * Get inventory for multiple products.\n   */\n  async getInventoryBulk(productIds: string[]): Promise<Map<string, ProductInventory>> {\n    const inventoryMap = new Map<string, ProductInventory>();\n\n    await Promise.all(\n      productIds.map(async (id) => {\n        try {\n          const inventory = await this.getInventory(id);\n          inventoryMap.set(id, inventory);\n        } catch {\n          // Product not found, skip\n        }\n      })\n    );\n\n    return inventoryMap;\n  }\n\n  /**\n   * Fetch a single product without related products (internal helper).\n   */\n  private async fetchProduct(idOrHandle: string): Promise<Product | null> {\n    try {\n      // Try by ID first\n      const response = await this.client.get<MedusaResponse<MedusaProduct>>(\n        `/store/products/${idOrHandle}`\n      );\n\n      if (!response.data.product) return null;\n\n      return mapMedusaProduct(response.data.product, this.regionId, this.currencyCode);\n    } catch {\n      // Try by handle if ID fails\n      const listResponse = await this.client.get<MedusaResponse<MedusaProduct>>(\n        `/store/products?handle=${idOrHandle}`\n      );\n\n      const product = listResponse.data.products?.[0];\n      if (!product) return null;\n\n      return mapMedusaProduct(product, this.regionId, this.currencyCode);\n    }\n  }\n\n  /**\n   * Extract facets from product list.\n   */\n  private async getFacetsFromProducts(products: Product[]): Promise<ProductFacets> {\n    // Extract unique values for facets\n    const categories = new Map<string, { id: string; name: string; count: number }>();\n    const collections = new Map<string, number>();\n    const materials = new Map<string, number>();\n    let minPrice = Infinity;\n    let maxPrice = 0;\n\n    for (const product of products) {\n      // Categories\n      if (product.categoryId && product.category) {\n        const existing = categories.get(product.categoryId);\n        if (existing) {\n          existing.count++;\n        } else {\n          categories.set(product.categoryId, {\n            id: product.categoryId,\n            name: product.category.name,\n            count: 1,\n          });\n        }\n      }\n\n      // Collections\n      if (product.collection) {\n        collections.set(product.collection, (collections.get(product.collection) ?? 0) + 1);\n      }\n\n      // Materials\n      product.materials.forEach((m) => {\n        materials.set(m, (materials.get(m) ?? 0) + 1);\n      });\n\n      // Price range\n      if (product.price < minPrice) minPrice = product.price;\n      if (product.price > maxPrice) maxPrice = product.price;\n    }\n\n    return {\n      categories: Array.from(categories.values()),\n      collections: Array.from(collections.entries()).map(([value, count]) => ({ value, count })),\n      materials: Array.from(materials.entries()).map(([value, count]) => ({ value, count })),\n      priceRange: {\n        min: minPrice === Infinity ? 0 : minPrice,\n        max: maxPrice,\n      },\n    };\n  }\n}\n","/**\n * Medusa Cart Service\n *\n * Implements ICartService for Medusa V2 backend.\n */\n\nimport type {\n  ICartService,\n  Cart,\n  CartLineItem,\n  CartShippingOption,\n  AddToCartInput,\n  UpdateCartItemInput,\n  BulkAddToCartInput,\n  BulkAddResult,\n} from \"@maison/api-client\";\nimport type { BaseApiClient } from \"@maison/api-core\";\nimport {\n  mapMedusaCart,\n  mapMedusaShippingOptions,\n  type MedusaCart,\n  type MedusaShippingOption,\n} from \"../mappers\";\n\n/**\n * Medusa Cart Service implementation.\n *\n * @example\n * ```typescript\n * const cartService = new MedusaCartService(httpClient, \"reg_123\");\n * const cart = await cartService.create();\n * await cartService.addItem(cart.id, { productId: \"prod_123\", quantity: 2 });\n * ```\n */\nexport class MedusaCartService implements ICartService {\n  constructor(\n    private readonly client: BaseApiClient,\n    private readonly regionId: string\n  ) {}\n\n  /**\n   * Get or create a cart.\n   */\n  async get(cartId?: string): Promise<Cart> {\n    if (!cartId) {\n      return this.create();\n    }\n\n    try {\n      const response = await this.client.get<{ cart: MedusaCart }>(\n        `/store/carts/${cartId}`\n      );\n      return mapMedusaCart(response.data.cart);\n    } catch {\n      // Cart not found, create a new one\n      return this.create();\n    }\n  }\n\n  /**\n   * Create a new cart.\n   */\n  async create(regionId?: string, customerId?: string): Promise<Cart> {\n    const body: Record<string, string | undefined> = {\n      region_id: regionId ?? this.regionId,\n    };\n\n    if (customerId) {\n      body[\"customer_id\"] = customerId;\n    }\n\n    const response = await this.client.post<{ cart: MedusaCart }>(\"/store/carts\", body);\n\n    return mapMedusaCart(response.data.cart);\n  }\n\n  /**\n   * Add item to cart.\n   */\n  async addItem(cartId: string, input: AddToCartInput): Promise<Cart> {\n    const response = await this.client.post<{ cart: MedusaCart }>(\n      `/store/carts/${cartId}/line-items`,\n      {\n        variant_id: input.variantId ?? input.productId,\n        quantity: input.quantity,\n        metadata: input.metadata,\n      }\n    );\n\n    return mapMedusaCart(response.data.cart);\n  }\n\n  /**\n   * Update cart item quantity.\n   */\n  async updateItem(cartId: string, itemId: string, input: UpdateCartItemInput): Promise<Cart> {\n    const response = await this.client.post<{ cart: MedusaCart }>(\n      `/store/carts/${cartId}/line-items/${itemId}`,\n      {\n        quantity: input.quantity,\n      }\n    );\n\n    return mapMedusaCart(response.data.cart);\n  }\n\n  /**\n   * Remove item from cart.\n   */\n  async removeItem(cartId: string, itemId: string): Promise<Cart> {\n    const response = await this.client.delete<{ cart: MedusaCart }>(\n      `/store/carts/${cartId}/line-items/${itemId}`\n    );\n\n    return mapMedusaCart(response.data.cart);\n  }\n\n  /**\n   * Add multiple items to cart (bulk operation).\n   */\n  async addItemsBulk(cartId: string, input: BulkAddToCartInput): Promise<BulkAddResult> {\n    const added: CartLineItem[] = [];\n    const failed: Array<{ input: AddToCartInput; reason: string }> = [];\n\n    // Clear cart first if replaceExisting is true\n    if (input.replaceExisting) {\n      await this.clear(cartId);\n    }\n\n    let currentCart: Cart | null = null;\n\n    for (const item of input.items) {\n      try {\n        currentCart = await this.addItem(cartId, item);\n        // Find the newly added item\n        const addedItem = currentCart.items.find(\n          (i) => i.productId === item.productId || i.variantId === item.variantId\n        );\n        if (addedItem) {\n          added.push(addedItem);\n        }\n      } catch (error) {\n        failed.push({\n          input: item,\n          reason: error instanceof Error ? error.message : \"Failed to add item\",\n        });\n      }\n    }\n\n    // Fetch final cart state\n    const finalCart = currentCart ?? (await this.get(cartId));\n\n    return {\n      added,\n      failed,\n      cart: finalCart,\n    };\n  }\n\n  /**\n   * Clear all items from cart.\n   */\n  async clear(cartId: string): Promise<Cart> {\n    const cart = await this.get(cartId);\n\n    // Remove all items one by one (Medusa doesn't have bulk clear)\n    for (const item of cart.items) {\n      await this.client.delete(`/store/carts/${cartId}/line-items/${item.id}`);\n    }\n\n    return this.get(cartId);\n  }\n\n  /**\n   * Apply discount code to cart.\n   */\n  async applyDiscount(cartId: string, code: string): Promise<Cart> {\n    const response = await this.client.post<{ cart: MedusaCart }>(\n      `/store/carts/${cartId}/discounts`,\n      { code }\n    );\n\n    return mapMedusaCart(response.data.cart);\n  }\n\n  /**\n   * Remove discount from cart.\n   */\n  async removeDiscount(cartId: string, discountId: string): Promise<Cart> {\n    const response = await this.client.delete<{ cart: MedusaCart }>(\n      `/store/carts/${cartId}/discounts/${discountId}`\n    );\n\n    return mapMedusaCart(response.data.cart);\n  }\n\n  /**\n   * Set shipping option.\n   */\n  async setShippingOption(cartId: string, optionId: string): Promise<Cart> {\n    const response = await this.client.post<{ cart: MedusaCart }>(\n      `/store/carts/${cartId}/shipping-methods`,\n      { option_id: optionId }\n    );\n\n    return mapMedusaCart(response.data.cart);\n  }\n\n  /**\n   * Get available shipping options.\n   */\n  async getShippingOptions(cartId: string): Promise<CartShippingOption[]> {\n    const response = await this.client.get<{ shipping_options: MedusaShippingOption[] }>(\n      `/store/shipping-options/${cartId}`\n    );\n\n    return mapMedusaShippingOptions(response.data.shipping_options ?? []);\n  }\n\n  /**\n   * Associate cart with customer.\n   */\n  async setCustomer(cartId: string, customerId: string): Promise<Cart> {\n    const response = await this.client.post<{ cart: MedusaCart }>(\n      `/store/carts/${cartId}`,\n      { customer_id: customerId }\n    );\n\n    return mapMedusaCart(response.data.cart);\n  }\n\n  /**\n   * Set addresses for cart.\n   */\n  async setAddresses(\n    cartId: string,\n    shippingAddressId: string,\n    billingAddressId?: string\n  ): Promise<Cart> {\n    // Note: Medusa V2 uses address IDs when the customer is logged in\n    // For guest checkout, full address objects would be passed\n    const response = await this.client.post<{ cart: MedusaCart }>(\n      `/store/carts/${cartId}`,\n      {\n        shipping_address_id: shippingAddressId,\n        billing_address_id: billingAddressId ?? shippingAddressId,\n      }\n    );\n\n    return mapMedusaCart(response.data.cart);\n  }\n\n  /**\n   * Update cart metadata.\n   */\n  async updateMetadata(cartId: string, metadata: Record<string, unknown>): Promise<Cart> {\n    const response = await this.client.post<{ cart: MedusaCart }>(\n      `/store/carts/${cartId}`,\n      { metadata }\n    );\n\n    return mapMedusaCart(response.data.cart);\n  }\n\n  /**\n   * Delete a cart.\n   */\n  async delete(cartId: string): Promise<void> {\n    await this.client.delete(`/store/carts/${cartId}`);\n  }\n\n  /**\n   * Merge guest cart into customer cart.\n   */\n  async merge(guestCartId: string, customerCartId: string): Promise<Cart> {\n    // Get guest cart items\n    const guestCart = await this.get(guestCartId);\n\n    // Add each item to customer cart\n    for (const item of guestCart.items) {\n      await this.addItem(customerCartId, {\n        productId: item.productId,\n        variantId: item.variantId,\n        quantity: item.quantity,\n        attributes: item.attributes,\n      });\n    }\n\n    // Delete guest cart\n    await this.delete(guestCartId);\n\n    // Return updated customer cart\n    return this.get(customerCartId);\n  }\n}\n","/**\n * Medusa Commerce Client\n *\n * Full implementation of ICommerceClient for Medusa V2 backend.\n */\n\nimport type {\n  ICommerceClient,\n  IB2BServices,\n  IProductService,\n  ICategoryService,\n  ICartService,\n  IOrderService,\n  ICustomerService,\n  CommerceClientConfig,\n  ApiProvider,\n} from \"@maison/api-client\";\nimport { BaseApiClient, type ApiClientConfig } from \"@maison/api-core\";\nimport { MedusaProductService } from \"./services/products\";\nimport { MedusaCartService } from \"./services/cart\";\n\n/**\n * Medusa-specific configuration options\n */\nexport interface MedusaConfig extends CommerceClientConfig {\n  /** Publishable API key for store operations */\n  publishableKey?: string;\n}\n\n/**\n * Extended BaseApiClient that supports dynamic header management\n */\nclass MedusaApiClient extends BaseApiClient {\n  private dynamicHeaders: Record<string, string> = {};\n\n  constructor(config: ApiClientConfig) {\n    super(config);\n  }\n\n  /**\n   * Set a dynamic header\n   */\n  setDynamicHeader(name: string, value: string): void {\n    this.dynamicHeaders[name] = value;\n  }\n\n  /**\n   * Remove a dynamic header\n   */\n  removeDynamicHeader(name: string): void {\n    delete this.dynamicHeaders[name];\n  }\n\n  /**\n   * Override buildHeaders to include dynamic headers\n   */\n  protected override buildHeaders(\n    customHeaders?: Record<string, string>\n  ): Headers {\n    const baseHeaders = super.buildHeaders(customHeaders);\n\n    // Add dynamic headers\n    for (const [name, value] of Object.entries(this.dynamicHeaders)) {\n      baseHeaders.set(name, value);\n    }\n\n    return baseHeaders;\n  }\n}\n\n/**\n * Medusa Commerce Client implementation.\n *\n * Provides full ICommerceClient interface for Medusa V2 backend.\n *\n * @example\n * ```typescript\n * const client = new MedusaCommerceClient({\n *   baseUrl: \"https://api.mystore.com\",\n *   regionId: \"reg_123\",\n *   publishableKey: \"pk_xxx\",\n *   enableB2B: true\n * });\n *\n * const products = await client.products.list({ pageSize: 20 });\n * const cart = await client.cart.create();\n * ```\n */\nexport class MedusaCommerceClient implements ICommerceClient {\n  // ApiAdapter interface\n  readonly name = \"medusa\";\n  readonly version = \"2.0\";\n\n  // ICommerceClient interface\n  readonly provider: ApiProvider = \"medusa\";\n  readonly config: CommerceClientConfig;\n\n  private readonly httpClient: MedusaApiClient;\n  private authToken: string | null = null;\n  private b2bContext: { companyId?: string; employeeId?: string } | null = null;\n  private initialized = false;\n\n  // Service instances (lazy initialized)\n  private _products: IProductService | null = null;\n  private _categories: ICategoryService | null = null;\n  private _cart: ICartService | null = null;\n  private _orders: IOrderService | null = null;\n  private _customers: ICustomerService | null = null;\n  private _b2b: IB2BServices | null = null;\n\n  constructor(config: MedusaConfig) {\n    this.config = config;\n\n    // Build default headers\n    const defaultHeaders: Record<string, string> = {\n      ...config.defaultHeaders,\n    };\n\n    if (config.publishableKey) {\n      defaultHeaders[\"x-publishable-api-key\"] = config.publishableKey;\n    }\n\n    // Initialize HTTP client\n    this.httpClient = new MedusaApiClient({\n      baseUrl: config.baseUrl,\n      defaultHeaders,\n      timeout: config.timeout,\n    });\n\n    // Initialize B2B context if provided\n    if (config.enableB2B && config.b2b) {\n      this.b2bContext = {\n        companyId: config.b2b.companyId,\n        employeeId: config.b2b.employeeId,\n      };\n    }\n\n    this.initialized = true;\n  }\n\n  // ==========================================\n  // ApiAdapter Interface\n  // ==========================================\n\n  async initialize(): Promise<void> {\n    // Already initialized in constructor\n    this.initialized = true;\n  }\n\n  isConfigured(): boolean {\n    return this.initialized && !!this.config.baseUrl;\n  }\n\n  async healthCheck(): Promise<boolean> {\n    try {\n      await this.httpClient.get(\"/health\");\n      return true;\n    } catch {\n      return false;\n    }\n  }\n\n  // ==========================================\n  // Service Accessors (Lazy Initialization)\n  // ==========================================\n\n  get products(): IProductService {\n    if (!this._products) {\n      this._products = new MedusaProductService(\n        this.httpClient,\n        this.config.regionId\n      );\n    }\n    return this._products;\n  }\n\n  get categories(): ICategoryService {\n    if (!this._categories) {\n      this._categories = this.createStubCategoryService();\n    }\n    return this._categories;\n  }\n\n  get cart(): ICartService {\n    if (!this._cart) {\n      if (!this.config.regionId) {\n        throw new Error(\"regionId is required for cart operations\");\n      }\n      this._cart = new MedusaCartService(this.httpClient, this.config.regionId);\n    }\n    return this._cart;\n  }\n\n  get orders(): IOrderService {\n    if (!this._orders) {\n      this._orders = this.createStubOrderService();\n    }\n    return this._orders;\n  }\n\n  get customers(): ICustomerService {\n    if (!this._customers) {\n      this._customers = this.createStubCustomerService();\n    }\n    return this._customers;\n  }\n\n  get b2b(): IB2BServices | null {\n    if (!this.config.enableB2B) {\n      return null;\n    }\n    if (!this._b2b) {\n      this._b2b = this.createStubB2BServices();\n    }\n    return this._b2b;\n  }\n\n  // ==========================================\n  // Authentication Methods\n  // ==========================================\n\n  setAuthToken(token: string): void {\n    this.authToken = token;\n    this.httpClient.setDynamicHeader(\"Authorization\", `Bearer ${token}`);\n  }\n\n  clearAuth(): void {\n    this.authToken = null;\n    this.httpClient.removeDynamicHeader(\"Authorization\");\n  }\n\n  getAuthToken(): string | null {\n    return this.authToken;\n  }\n\n  // ==========================================\n  // B2B Context Methods\n  // ==========================================\n\n  setB2BContext(companyId: string, employeeId?: string): void {\n    this.b2bContext = { companyId, employeeId };\n    this.httpClient.setDynamicHeader(\"x-company-id\", companyId);\n    if (employeeId) {\n      this.httpClient.setDynamicHeader(\"x-employee-id\", employeeId);\n    }\n  }\n\n  clearB2BContext(): void {\n    this.b2bContext = null;\n    this.httpClient.removeDynamicHeader(\"x-company-id\");\n    this.httpClient.removeDynamicHeader(\"x-employee-id\");\n  }\n\n  getB2BContext(): { companyId?: string; employeeId?: string } | null {\n    return this.b2bContext;\n  }\n\n  isB2BEnabled(): boolean {\n    return this.config.enableB2B ?? false;\n  }\n\n  // ==========================================\n  // HTTP Client Access\n  // ==========================================\n\n  getHttpClient() {\n    return {\n      get: <T>(path: string, options?: Record<string, unknown>) =>\n        this.httpClient.get<T>(path, options).then((r) => r.data),\n      post: <T>(path: string, body?: unknown, options?: Record<string, unknown>) =>\n        this.httpClient.post<T>(path, body, options).then((r) => r.data),\n      put: <T>(path: string, body?: unknown, options?: Record<string, unknown>) =>\n        this.httpClient.put<T>(path, body, options).then((r) => r.data),\n      patch: <T>(path: string, body?: unknown, options?: Record<string, unknown>) =>\n        this.httpClient.patch<T>(path, body, options).then((r) => r.data),\n      delete: <T>(path: string, options?: Record<string, unknown>) =>\n        this.httpClient.delete<T>(path, options).then((r) => r.data),\n    };\n  }\n\n  // ==========================================\n  // Stub Services (to be implemented)\n  // ==========================================\n\n  private createStubCategoryService(): ICategoryService {\n    const notImplemented = (): never => {\n      throw new Error(\"Category service not implemented for Medusa adapter\");\n    };\n\n    return {\n      list: async () => [],\n      get: async () => notImplemented(),\n      getBySlug: async () => notImplemented(),\n      getTree: async () => [],\n      getRoots: async () => [],\n      getChildren: async () => [],\n      getBreadcrumbs: async () => [],\n      getMany: async () => [],\n    };\n  }\n\n  private createStubOrderService(): IOrderService {\n    const notImplemented = (): never => {\n      throw new Error(\"Order service not implemented for Medusa adapter\");\n    };\n\n    const emptyPaginated = () => ({\n      items: [],\n      total: 0,\n      page: 1,\n      pageSize: 20,\n      hasNextPage: false,\n      hasPreviousPage: false,\n    });\n\n    return {\n      list: async () => emptyPaginated(),\n      get: async () => notImplemented(),\n      getByNumber: async () => notImplemented(),\n      create: async () => notImplemented(),\n      createDirect: async () => notImplemented(),\n      cancel: async () => notImplemented(),\n      updateNotes: async () => notImplemented(),\n      getFulfillments: async () => [],\n      getRefunds: async () => [],\n      requestRefund: async () => notImplemented(),\n      getCustomerOrders: async () => emptyPaginated(),\n      getCompanyOrders: async () => emptyPaginated(),\n      reorder: async () => notImplemented(),\n      getInvoiceUrl: async () => notImplemented(),\n      track: async () => notImplemented(),\n    };\n  }\n\n  private createStubCustomerService(): ICustomerService {\n    const notImplemented = (): never => {\n      throw new Error(\"Customer service not implemented for Medusa adapter\");\n    };\n\n    return {\n      getCurrent: async () => notImplemented(),\n      get: async () => notImplemented(),\n      getByEmail: async () => notImplemented(),\n      update: async () => notImplemented(),\n      register: async () => notImplemented(),\n      login: async () => notImplemented(),\n      logout: async () => {},\n      refreshToken: async () => notImplemented(),\n      requestPasswordReset: async () => notImplemented(),\n      resetPassword: async () => notImplemented(),\n      changePassword: async () => notImplemented(),\n      listAddresses: async () => [],\n      getAddress: async () => notImplemented(),\n      addAddress: async () => notImplemented(),\n      updateAddress: async () => notImplemented(),\n      deleteAddress: async () => {},\n      setDefaultAddress: async () => notImplemented(),\n      getDefaultShippingAddress: async () => null,\n      getDefaultBillingAddress: async () => null,\n      delete: async () => {},\n    };\n  }\n\n  private createStubB2BServices(): IB2BServices {\n    const notImplemented = (): never => {\n      throw new Error(\"B2B service not implemented. Requires Medusa B2B plugins.\");\n    };\n\n    const emptyPaginated = () => ({\n      items: [],\n      total: 0,\n      page: 1,\n      pageSize: 20,\n      hasNextPage: false,\n      hasPreviousPage: false,\n    });\n\n    return {\n      companies: {\n        list: async () => emptyPaginated(),\n        get: async () => notImplemented(),\n        getBySlug: async () => notImplemented(),\n        getCurrent: async () => null,\n        register: async () => notImplemented(),\n        update: async () => notImplemented(),\n        updateStatus: async () => notImplemented(),\n        updateTier: async () => notImplemented(),\n        listAddresses: async () => [],\n        addAddress: async () => notImplemented(),\n        updateAddress: async () => notImplemented(),\n        deleteAddress: async () => {},\n        setDefaultAddress: async () => notImplemented(),\n        getCreditInfo: async () => notImplemented(),\n        adjustCredit: async () => notImplemented(),\n        getCreditHistory: async () => emptyPaginated(),\n        updateCreditLimit: async () => notImplemented(),\n        addTags: async () => notImplemented(),\n        removeTags: async () => notImplemented(),\n        delete: async () => {},\n      },\n      employees: {\n        list: async () => emptyPaginated(),\n        get: async () => notImplemented(),\n        getCurrent: async () => notImplemented(),\n        invite: async () => notImplemented(),\n        resendInvitation: async () => notImplemented(),\n        cancelInvitation: async () => {},\n        acceptInvitation: async () => notImplemented(),\n        listInvitations: async () => [],\n        update: async () => notImplemented(),\n        updateStatus: async () => notImplemented(),\n        updateRole: async () => notImplemented(),\n        updatePermissions: async () => notImplemented(),\n        updateSpendingLimits: async () => notImplemented(),\n        resetSpending: async () => notImplemented(),\n        getPermissions: async () => [],\n        hasPermission: async () => false,\n        login: async () => notImplemented(),\n        logout: async () => {},\n        refreshToken: async () => notImplemented(),\n        changePassword: async () => {},\n        requestPasswordReset: async () => {},\n        resetPassword: async () => {},\n        getActivity: async () => emptyPaginated(),\n        listDepartments: async () => [],\n        createDepartment: async () => notImplemented(),\n        updateDepartment: async () => notImplemented(),\n        deleteDepartment: async () => {},\n        getByDepartment: async () => [],\n        delete: async () => {},\n      },\n      quotes: {\n        list: async () => emptyPaginated(),\n        get: async () => notImplemented(),\n        getByNumber: async () => notImplemented(),\n        createFromCart: async () => notImplemented(),\n        create: async () => notImplemented(),\n        update: async () => notImplemented(),\n        submit: async () => notImplemented(),\n        accept: async () => notImplemented(),\n        reject: async () => notImplemented(),\n        cancel: async () => notImplemented(),\n        convertToOrder: async () => notImplemented(),\n        convertToCart: async () => notImplemented(),\n        requestRevision: async () => notImplemented(),\n        createRevision: async () => notImplemented(),\n        addItem: async () => notImplemented(),\n        updateItem: async () => notImplemented(),\n        removeItem: async () => notImplemented(),\n        getMessages: async () => [],\n        sendMessage: async () => notImplemented(),\n        markMessagesRead: async () => {},\n        uploadAttachment: async () => notImplemented(),\n        deleteAttachment: async () => {},\n        generatePdf: async () => notImplemented(),\n        getPdfUrl: async () => notImplemented(),\n        getByCompany: async () => emptyPaginated(),\n        getByEmployee: async () => emptyPaginated(),\n        getRequiringAttention: async () => [],\n        delete: async () => {},\n      },\n      approvals: {\n        list: async () => emptyPaginated(),\n        get: async () => notImplemented(),\n        getByNumber: async () => notImplemented(),\n        getMyPending: async () => emptyPaginated(),\n        getMySubmitted: async () => emptyPaginated(),\n        getStats: async () => notImplemented(),\n        takeAction: async () => notImplemented(),\n        approve: async () => notImplemented(),\n        reject: async () => notImplemented(),\n        delegate: async () => notImplemented(),\n        escalate: async () => notImplemented(),\n        requestInfo: async () => notImplemented(),\n        addComment: async () => notImplemented(),\n        listWorkflows: async () => [],\n        getWorkflow: async () => notImplemented(),\n        createWorkflow: async () => notImplemented(),\n        updateWorkflow: async () => notImplemented(),\n        deleteWorkflow: async () => {},\n        activateWorkflow: async () => notImplemented(),\n        deactivateWorkflow: async () => notImplemented(),\n        listDelegations: async () => [],\n        createDelegation: async () => notImplemented(),\n        cancelDelegation: async () => {},\n        getMyDelegations: async () => [],\n        getDelegationsToMe: async () => [],\n        approveMany: async () => new Map(),\n        rejectMany: async () => new Map(),\n      },\n      spending: {\n        listLimits: async () => [],\n        getLimit: async () => notImplemented(),\n        getEmployeeLimits: async () => [],\n        getDepartmentLimits: async () => [],\n        createLimit: async () => notImplemented(),\n        updateLimit: async () => notImplemented(),\n        deleteLimit: async () => {},\n        resetLimit: async () => notImplemented(),\n        listRules: async () => [],\n        getRule: async () => notImplemented(),\n        createRule: async () => notImplemented(),\n        updateRule: async () => notImplemented(),\n        deleteRule: async () => {},\n        activateRule: async () => notImplemented(),\n        deactivateRule: async () => notImplemented(),\n        checkPurchase: async () => ({\n          allowed: true,\n          affectedLimits: [],\n          triggeredRules: [],\n          requiresApproval: false,\n        }),\n        getRemainingBudget: async () => 0,\n        listTransactions: async () => emptyPaginated(),\n        getEmployeeTransactions: async () => emptyPaginated(),\n        recordAdjustment: async () => notImplemented(),\n        getReport: async () => notImplemented(),\n        getBudgetSummaries: async () => [],\n        getEmployeeBudgetSummary: async () => [],\n        getDepartmentBudgetSummary: async () => notImplemented(),\n        exportReport: async () => notImplemented(),\n        getAlerts: async () => [],\n        dismissAlert: async () => {},\n      },\n    };\n  }\n}\n\n/**\n * Create a Medusa commerce client.\n *\n * @param config - Client configuration\n * @returns Medusa commerce client\n *\n * @example\n * ```typescript\n * const client = createMedusaClient({\n *   baseUrl: \"https://api.mystore.com\",\n *   regionId: \"reg_123\",\n *   publishableKey: \"pk_xxx\"\n * });\n * ```\n */\nexport function createMedusaClient(config: MedusaConfig): ICommerceClient {\n  return new MedusaCommerceClient(config);\n}\n","/**\n * @maison/api-medusa\n *\n * Medusa V2 adapter for the unified commerce API client.\n *\n * This package provides ICommerceClient implementation for Medusa V2 backend,\n * including support for B2B features through custom Medusa plugins.\n *\n * @packageDocumentation\n *\n * @example\n * ```typescript\n * import { createMedusaClient, registerMedusaProvider } from \"@maison/api-medusa\";\n * import { createApiClient, registerProvider } from \"@maison/api-client\";\n *\n * // Option 1: Direct creation\n * const medusaClient = createMedusaClient({\n *   baseUrl: \"https://api.mystore.com\",\n *   regionId: \"reg_123\",\n *   publishableKey: \"pk_xxx\",\n *   enableB2B: true\n * });\n *\n * // Option 2: Register with api-client factory\n * registerMedusaProvider();\n * const client = createApiClient({\n *   provider: \"medusa\",\n *   baseUrl: \"https://api.mystore.com\",\n *   regionId: \"reg_123\",\n *   publishableKey: \"pk_xxx\"\n * });\n *\n * // Use the client\n * const products = await client.products.list({ pageSize: 20 });\n * const cart = await client.cart.create();\n * ```\n */\n\nimport { registerProvider, type ProviderConfig, type ICommerceClient } from \"@maison/api-client\";\nimport { MedusaCommerceClient, createMedusaClient, type MedusaConfig } from \"./client\";\n\n// Export client and factory\nexport { MedusaCommerceClient, createMedusaClient, type MedusaConfig } from \"./client\";\n\n// Export services\nexport { MedusaProductService } from \"./services/products\";\nexport { MedusaCartService } from \"./services/cart\";\n\n// Export mappers\nexport * from \"./mappers\";\n\n/**\n * Register Medusa provider with the api-client factory.\n *\n * After calling this, you can use `createApiClient({ provider: \"medusa\", ... })`\n * to create Medusa clients through the unified factory.\n *\n * @example\n * ```typescript\n * import { registerMedusaProvider } from \"@maison/api-medusa\";\n * import { createApiClient } from \"@maison/api-client\";\n *\n * // Register once at app startup\n * registerMedusaProvider();\n *\n * // Now create clients using the factory\n * const client = createApiClient({\n *   provider: \"medusa\",\n *   baseUrl: \"https://api.mystore.com\",\n *   regionId: \"reg_123\"\n * });\n * ```\n */\nexport function registerMedusaProvider(): void {\n  registerProvider(\"medusa\", (config: ProviderConfig): ICommerceClient => {\n    return createMedusaClient(config as MedusaConfig);\n  });\n}\n\n// Auto-register provider when module is imported (side effect)\n// Users can also call registerMedusaProvider() manually for explicit registration\ntry {\n  registerMedusaProvider();\n} catch {\n  // Provider might already be registered, ignore\n}\n"]}