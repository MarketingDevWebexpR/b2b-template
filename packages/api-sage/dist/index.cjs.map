{"version":3,"sources":["../src/client.ts","../src/mappers/product.ts","../src/services/products.ts","../src/commerce-client.ts"],"names":["BaseApiClient"],"mappings":"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","file":"index.cjs","sourcesContent":["/**\n * Sage API client implementation\n */\n\nimport {\n  BaseApiClient,\n  type ApiAdapter,\n  type ApiResponse,\n  type PaginatedResponse,\n} from \"@maison/api-core\";\nimport type {\n  SageConfig,\n  SageProduct,\n  SageInventory,\n  SageProductsResponse,\n  SageInventoryResponse,\n} from \"./types\";\n\n/**\n * Default Sage API version\n */\nconst DEFAULT_API_VERSION = \"v1\";\n\n/**\n * Sage API client for interacting with Sage ERP\n */\nexport class SageApiClient extends BaseApiClient implements ApiAdapter {\n  public readonly name = \"sage\";\n  public readonly version = \"1.0.0\";\n\n  private readonly companyId: string;\n  private readonly apiVersion: string;\n  private initialized = false;\n\n  constructor(config: SageConfig) {\n    super(config);\n    this.companyId = config.companyId;\n    this.apiVersion = config.apiVersion ?? DEFAULT_API_VERSION;\n  }\n\n  /**\n   * Initialize the Sage client\n   */\n  async initialize(): Promise<void> {\n    // Verify connection by checking health\n    const healthy = await this.healthCheck();\n    if (!healthy) {\n      throw new Error(\"Failed to connect to Sage API\");\n    }\n    this.initialized = true;\n  }\n\n  /**\n   * Check if the client is properly configured\n   */\n  isConfigured(): boolean {\n    return this.initialized && Boolean(this.config.authToken);\n  }\n\n  /**\n   * Perform health check on Sage API\n   */\n  async healthCheck(): Promise<boolean> {\n    try {\n      await this.get(`/${this.apiVersion}/health`);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Get a list of products from Sage\n   */\n  async getProducts(options?: {\n    page?: number;\n    pageSize?: number;\n    category?: string;\n    active?: boolean;\n  }): Promise<PaginatedResponse<SageProduct>> {\n    const response = await this.get<SageProductsResponse>(\n      `/${this.apiVersion}/companies/${this.companyId}/products`,\n      {\n        params: {\n          page: options?.page ?? 1,\n          pageSize: options?.pageSize ?? 50,\n          category: options?.category,\n          active: options?.active,\n        },\n      }\n    );\n\n    const { products, total, page, pageSize } = response.data;\n\n    return {\n      items: products,\n      total,\n      page,\n      pageSize,\n      hasNextPage: page * pageSize < total,\n      hasPreviousPage: page > 1,\n    };\n  }\n\n  /**\n   * Get a single product by ID\n   */\n  async getProduct(productId: string): Promise<ApiResponse<SageProduct>> {\n    return this.get<SageProduct>(\n      `/${this.apiVersion}/companies/${this.companyId}/products/${productId}`\n    );\n  }\n\n  /**\n   * Get inventory for all products or a specific product\n   */\n  async getInventory(productId?: string): Promise<readonly SageInventory[]> {\n    const path = productId\n      ? `/${this.apiVersion}/companies/${this.companyId}/inventory/${productId}`\n      : `/${this.apiVersion}/companies/${this.companyId}/inventory`;\n\n    const response = await this.get<SageInventoryResponse>(path);\n    return response.data.inventory;\n  }\n\n  /**\n   * Update inventory quantity for a product\n   */\n  async updateInventory(\n    productId: string,\n    warehouseId: string,\n    quantity: number\n  ): Promise<ApiResponse<SageInventory>> {\n    return this.patch<SageInventory>(\n      `/${this.apiVersion}/companies/${this.companyId}/inventory/${productId}`,\n      {\n        warehouseId,\n        quantity,\n      }\n    );\n  }\n\n  /**\n   * Sync products from Sage (full sync)\n   */\n  async syncProducts(): Promise<{\n    synced: number;\n    errors: readonly string[];\n  }> {\n    const response = await this.post<{\n      synced: number;\n      errors: readonly string[];\n    }>(`/${this.apiVersion}/companies/${this.companyId}/sync/products`);\n\n    return response.data;\n  }\n}\n","/**\n * Product mappers for Sage ERP API responses\n *\n * Maps Sage API product format to domain Product type.\n */\n\nimport type { Product } from \"@maison/types\";\nimport type { SageProduct, SageRawArticle } from \"../types\";\n\n/**\n * Generate slug from name\n */\nfunction generateSlug(name: string, sku: string): string {\n  if (!name) return sku.toLowerCase().replace(/[^a-z0-9]+/g, \"-\");\n  return name\n    .toLowerCase()\n    .normalize(\"NFD\")\n    .replace(/[\\u0300-\\u036f]/g, \"\")\n    .replace(/[^a-z0-9]+/g, \"-\")\n    .replace(/^-|-$/g, \"\");\n}\n\n/**\n * Map Sage raw article (from Proconsult WebServices) to domain Product\n *\n * @param raw - Raw article from Sage API\n * @returns Domain Product object\n */\nexport function mapSageArticle(raw: SageRawArticle): Product {\n  // Extract collection/style from statistics\n  const collection = raw.Statistique1 || undefined;\n  const style = raw.Statistique2 || undefined;\n\n  // Extract brand from InfosLibres if available\n  let brand: string | undefined;\n  if (raw.InfosLibres) {\n    const brandInfo = raw.InfosLibres.find(\n      (info) => info.Name === \"Marque commerciale\"\n    );\n    if (brandInfo && brandInfo.Value) {\n      brand = String(brandInfo.Value);\n    }\n  }\n\n  // Determine availability\n  const isAvailable = raw.Publie && !raw.EstEnSommeil && !raw.InterdireCommande;\n\n  // Extract images (single photo path from Sage)\n  const images: string[] = [];\n  if (raw.Photo) {\n    images.push(raw.Photo);\n  }\n\n  return {\n    id: raw.Reference,\n    reference: raw.Reference,\n    name: raw.Intitule,\n    slug: generateSlug(raw.Intitule, raw.Reference),\n    description: raw.Langue1 ?? raw.Intitule,\n    shortDescription: raw.Intitule,\n    price: raw.PrixVente,\n    isPriceTTC: raw.EstEnPrixTTTC,\n    images,\n    categoryId: raw.CodeFamille,\n    materials: [],\n    weightUnit: \"g\",\n    stock: 0, // Stock comes from separate inventory call\n    isAvailable,\n    featured: false,\n    isNew: false,\n    createdAt: raw.DateCreation,\n    // Optional properties\n    ...(raw.Langue1 && { nameEn: raw.Langue1 }),\n    ...(raw.CodeBarres && { ean: raw.CodeBarres }),\n    ...(collection && { collection }),\n    ...(style && { style }),\n    ...(raw.PoidsNet && { weight: raw.PoidsNet }),\n    ...(brand && { brand }),\n    ...(raw.Pays && { origin: raw.Pays }),\n    ...(raw.Garantie && { warranty: raw.Garantie }),\n  };\n}\n\n/**\n * Map simplified Sage product to domain Product\n */\nexport function mapSageProduct(raw: SageProduct): Product {\n  return {\n    id: raw.id,\n    reference: raw.sku,\n    name: raw.name,\n    slug: generateSlug(raw.name, raw.sku),\n    description: raw.description ?? \"\",\n    shortDescription: raw.description ?? \"\",\n    price: raw.price,\n    isPriceTTC: false,\n    images: [],\n    categoryId: raw.category ?? \"\",\n    materials: [],\n    weightUnit: \"g\",\n    stock: 0,\n    isAvailable: raw.active,\n    featured: false,\n    isNew: false,\n    createdAt: raw.createdAt,\n    ...(raw.category && { collection: raw.category }),\n  };\n}\n\n/**\n * Map array of Sage products to domain Products\n */\nexport function mapSageProducts(rawProducts: SageProduct[]): Product[] {\n  return rawProducts.map(mapSageProduct);\n}\n\n/**\n * Map array of Sage articles to domain Products\n */\nexport function mapSageArticles(rawArticles: SageRawArticle[]): Product[] {\n  return rawArticles.map(mapSageArticle);\n}\n","/**\n * Sage Product Service\n *\n * Implements IProductService for Sage ERP integration.\n * Provides product sync and inventory management from Sage.\n */\n\nimport type { Product } from \"@maison/types\";\nimport type { PaginatedResponse } from \"@maison/api-core\";\nimport type {\n  IProductService,\n  ListProductsOptions,\n  GetProductOptions,\n  ProductWithRelated,\n  ProductSearchResult,\n  ProductInventory,\n} from \"@maison/api-client\";\nimport type { SageApiClient } from \"../client\";\nimport { mapSageProduct, mapSageProducts } from \"../mappers\";\n\n/**\n * Product service for Sage ERP\n *\n * @remarks\n * Sage is primarily used for:\n * - Product catalog sync from ERP\n * - Real-time inventory levels\n * - Product pricing from ERP\n *\n * Some features like search and related products are limited\n * as Sage is not a full e-commerce platform.\n */\nexport class SageProductService implements IProductService {\n  constructor(private readonly client: SageApiClient) {}\n\n  /**\n   * List products from Sage\n   */\n  async list(options?: ListProductsOptions): Promise<PaginatedResponse<Product>> {\n    const result = await this.client.getProducts({\n      page: options?.page ?? 1,\n      pageSize: options?.pageSize ?? 50,\n      ...(options?.categoryId && { category: options.categoryId }),\n      ...(options?.availableOnly !== undefined && { active: options.availableOnly }),\n    });\n\n    return {\n      items: mapSageProducts([...result.items]),\n      total: result.total,\n      page: result.page,\n      pageSize: result.pageSize,\n      hasNextPage: result.hasNextPage,\n      hasPreviousPage: result.hasPreviousPage,\n    };\n  }\n\n  /**\n   * Get a single product by ID (reference in Sage)\n   */\n  async get(id: string, _options?: GetProductOptions): Promise<ProductWithRelated> {\n    const response = await this.client.getProduct(id);\n    const product = mapSageProduct(response.data);\n\n    // Sage doesn't have native related products functionality\n    return product;\n  }\n\n  /**\n   * Get product by slug\n   *\n   * @remarks\n   * Sage doesn't use slugs natively, so we search by reference.\n   */\n  async getBySlug(slug: string, options?: GetProductOptions): Promise<ProductWithRelated> {\n    // In Sage, we use reference as the primary identifier\n    // Slugs would be generated client-side from the name\n    // Try to find by searching all products\n    const result = await this.list({ pageSize: 100 });\n    const found = result.items.find((p) => p.slug === slug);\n\n    if (!found) {\n      throw new Error(`Product with slug \"${slug}\" not found`);\n    }\n\n    return this.get(found.id, options);\n  }\n\n  /**\n   * Get product by SKU (reference in Sage)\n   */\n  async getBySku(sku: string, options?: GetProductOptions): Promise<ProductWithRelated> {\n    // In Sage, SKU is the Reference field\n    return this.get(sku, options);\n  }\n\n  /**\n   * Search products\n   *\n   * @remarks\n   * Sage has limited search capabilities. This implementation\n   * fetches all products and filters client-side.\n   */\n  async search(query: string, options?: ListProductsOptions): Promise<ProductSearchResult> {\n    // Sage doesn't have native search, fetch and filter\n    const result = await this.list({\n      ...options,\n      pageSize: options?.pageSize ?? 100,\n    });\n\n    const queryLower = query.toLowerCase();\n    const filtered = result.items.filter(\n      (p) =>\n        p.name.toLowerCase().includes(queryLower) ||\n        p.reference.toLowerCase().includes(queryLower) ||\n        p.description?.toLowerCase().includes(queryLower)\n    );\n\n    return {\n      products: filtered,\n      total: filtered.length,\n    };\n  }\n\n  /**\n   * Get multiple products by IDs\n   */\n  async getMany(ids: string[]): Promise<Product[]> {\n    const products: Product[] = [];\n\n    // Sage doesn't have batch get, fetch individually\n    for (const id of ids) {\n      try {\n        const product = await this.get(id);\n        products.push(product);\n      } catch {\n        // Skip products that fail to fetch\n        console.warn(`Failed to fetch product ${id} from Sage`);\n      }\n    }\n\n    return products;\n  }\n\n  /**\n   * Get featured products\n   *\n   * @remarks\n   * Sage doesn't have a concept of featured products.\n   * Returns first N products instead.\n   */\n  async getFeatured(limit = 10): Promise<Product[]> {\n    const result = await this.list({ pageSize: limit, availableOnly: true });\n    return [...result.items];\n  }\n\n  /**\n   * Get new products\n   *\n   * @remarks\n   * Returns products created within the specified days.\n   */\n  async getNew(limit = 10, daysBack = 30): Promise<Product[]> {\n    const result = await this.list({ pageSize: 100, availableOnly: true });\n    const cutoff = new Date();\n    cutoff.setDate(cutoff.getDate() - daysBack);\n\n    const newProducts = result.items.filter((p) => {\n      if (!p.createdAt) return false;\n      return new Date(p.createdAt) >= cutoff;\n    });\n\n    return newProducts.slice(0, limit);\n  }\n\n  /**\n   * Get products by category\n   */\n  async getByCategory(\n    categoryId: string,\n    options?: Omit<ListProductsOptions, \"categoryId\">\n  ): Promise<PaginatedResponse<Product>> {\n    return this.list({ ...options, categoryId });\n  }\n\n  /**\n   * Get inventory for a product\n   */\n  async getInventory(productId: string): Promise<ProductInventory> {\n    const inventory = await this.client.getInventory(productId);\n\n    if (inventory.length === 0) {\n      return {\n        productId,\n        sku: productId,\n        available: 0,\n        reserved: 0,\n      };\n    }\n\n    // Aggregate inventory across warehouses\n    const totalAvailable = inventory.reduce((sum, inv) => sum + inv.availableQuantity, 0);\n    const totalReserved = inventory.reduce((sum, inv) => sum + inv.reservedQuantity, 0);\n    const firstItem = inventory[0];\n\n    return {\n      productId,\n      sku: firstItem ? firstItem.sku : productId,\n      available: totalAvailable,\n      reserved: totalReserved,\n    };\n  }\n\n  /**\n   * Get inventory for multiple products\n   */\n  async getInventoryBulk(productIds: string[]): Promise<Map<string, ProductInventory>> {\n    const inventoryMap = new Map<string, ProductInventory>();\n\n    // Fetch all inventory and filter\n    const allInventory = await this.client.getInventory();\n\n    for (const productId of productIds) {\n      const productInventory = allInventory.filter((inv) => inv.productId === productId);\n\n      if (productInventory.length > 0) {\n        const totalAvailable = productInventory.reduce(\n          (sum, inv) => sum + inv.availableQuantity,\n          0\n        );\n        const totalReserved = productInventory.reduce(\n          (sum, inv) => sum + inv.reservedQuantity,\n          0\n        );\n        const firstItem = productInventory[0];\n\n        inventoryMap.set(productId, {\n          productId,\n          sku: firstItem ? firstItem.sku : productId,\n          available: totalAvailable,\n          reserved: totalReserved,\n        });\n      } else {\n        inventoryMap.set(productId, {\n          productId,\n          sku: productId,\n          available: 0,\n          reserved: 0,\n        });\n      }\n    }\n\n    return inventoryMap;\n  }\n}\n","/**\n * Sage Commerce Client\n *\n * Implements ICommerceClient for Sage ERP integration.\n * Provides product and inventory synchronization from Sage.\n *\n * @remarks\n * Sage is primarily an ERP/accounting system, so many e-commerce\n * features (cart, checkout, customer auth) are not available.\n * This client is best used for:\n * - Product catalog synchronization\n * - Real-time inventory levels\n * - Price list management\n */\n\nimport type {\n  ICommerceClient,\n  IProductService,\n  ICategoryService,\n  ICartService,\n  IOrderService,\n  ICustomerService,\n  IB2BServices,\n  CommerceClientConfig,\n  ApiProvider,\n  CategoryWithHierarchy,\n  CategoryTreeNode,\n  Cart,\n  BulkAddResult,\n  CartShippingOption,\n  OrderWithDetails,\n  OrderFulfillment,\n  OrderRefund,\n  Customer,\n  CustomerAddress,\n  AuthResult,\n  PasswordResetResult,\n} from \"@maison/api-client\";\nimport type { Category, Order } from \"@maison/types\";\nimport type { PaginatedResponse } from \"@maison/api-core\";\nimport { SageApiClient } from \"./client\";\nimport { SageProductService } from \"./services/products\";\nimport type { SageConfig } from \"./types\";\n\n/**\n * Helper to create not implemented error\n */\nfunction notImplemented(method: string): never {\n  throw new Error(`${method} is not available in Sage adapter. Sage is an ERP system, not a full e-commerce platform.`);\n}\n\n/**\n * Create a stub category service\n *\n * @remarks\n * Sage can provide family/category data but with limited hierarchy.\n * For full category management, use the primary e-commerce backend.\n */\nfunction createStubCategoryService(): ICategoryService {\n  return {\n    async list(): Promise<Category[]> {\n      return [];\n    },\n    async get(_id: string): Promise<CategoryWithHierarchy> {\n      notImplemented(\"categories.get\");\n    },\n    async getBySlug(_slug: string): Promise<CategoryWithHierarchy> {\n      notImplemented(\"categories.getBySlug\");\n    },\n    async getTree(): Promise<CategoryTreeNode[]> {\n      return [];\n    },\n    async getRoots(): Promise<Category[]> {\n      return [];\n    },\n    async getChildren(_parentId: string): Promise<Category[]> {\n      return [];\n    },\n    async getBreadcrumbs(_categoryId: string): Promise<Category[]> {\n      return [];\n    },\n    async getMany(_ids: string[]): Promise<Category[]> {\n      return [];\n    },\n  };\n}\n\n/**\n * Create a stub cart service\n *\n * @remarks\n * Sage doesn't have cart functionality.\n * Use the primary e-commerce backend for cart operations.\n */\nfunction createStubCartService(): ICartService {\n  return {\n    async get(_cartId?: string): Promise<Cart> {\n      notImplemented(\"cart.get\");\n    },\n    async create(_regionId?: string, _customerId?: string): Promise<Cart> {\n      notImplemented(\"cart.create\");\n    },\n    async addItem(_cartId: string, _input: Parameters<ICartService[\"addItem\"]>[1]): Promise<Cart> {\n      notImplemented(\"cart.addItem\");\n    },\n    async updateItem(_cartId: string, _itemId: string, _input: Parameters<ICartService[\"updateItem\"]>[2]): Promise<Cart> {\n      notImplemented(\"cart.updateItem\");\n    },\n    async removeItem(_cartId: string, _itemId: string): Promise<Cart> {\n      notImplemented(\"cart.removeItem\");\n    },\n    async addItemsBulk(_cartId: string, _input: Parameters<ICartService[\"addItemsBulk\"]>[1]): Promise<BulkAddResult> {\n      notImplemented(\"cart.addItemsBulk\");\n    },\n    async clear(_cartId: string): Promise<Cart> {\n      notImplemented(\"cart.clear\");\n    },\n    async applyDiscount(_cartId: string, _code: string): Promise<Cart> {\n      notImplemented(\"cart.applyDiscount\");\n    },\n    async removeDiscount(_cartId: string, _discountId: string): Promise<Cart> {\n      notImplemented(\"cart.removeDiscount\");\n    },\n    async setShippingOption(_cartId: string, _optionId: string): Promise<Cart> {\n      notImplemented(\"cart.setShippingOption\");\n    },\n    async getShippingOptions(_cartId: string): Promise<CartShippingOption[]> {\n      return [];\n    },\n    async setCustomer(_cartId: string, _customerId: string): Promise<Cart> {\n      notImplemented(\"cart.setCustomer\");\n    },\n    async setAddresses(_cartId: string, _shippingAddressId: string, _billingAddressId?: string): Promise<Cart> {\n      notImplemented(\"cart.setAddresses\");\n    },\n    async updateMetadata(_cartId: string, _metadata: Record<string, unknown>): Promise<Cart> {\n      notImplemented(\"cart.updateMetadata\");\n    },\n    async delete(_cartId: string): Promise<void> {\n      // No-op\n    },\n    async merge(_guestCartId: string, _customerCartId: string): Promise<Cart> {\n      notImplemented(\"cart.merge\");\n    },\n  };\n}\n\n/**\n * Create a stub order service\n *\n * @remarks\n * Sage can sync order data but doesn't manage orders directly.\n * Order creation should be done via the primary e-commerce backend.\n */\nfunction createStubOrderService(): IOrderService {\n  return {\n    async list(_options?: Parameters<IOrderService[\"list\"]>[0]): Promise<PaginatedResponse<Order>> {\n      return {\n        items: [],\n        total: 0,\n        page: 1,\n        pageSize: 20,\n        hasNextPage: false,\n        hasPreviousPage: false,\n      };\n    },\n    async get(_id: string): Promise<OrderWithDetails> {\n      notImplemented(\"orders.get\");\n    },\n    async getByNumber(_orderNumber: string): Promise<OrderWithDetails> {\n      notImplemented(\"orders.getByNumber\");\n    },\n    async create(_input: Parameters<IOrderService[\"create\"]>[0]): Promise<Order> {\n      notImplemented(\"orders.create\");\n    },\n    async createDirect(_input: Parameters<IOrderService[\"createDirect\"]>[0]): Promise<Order> {\n      notImplemented(\"orders.createDirect\");\n    },\n    async cancel(_orderId: string, _reason?: string): Promise<Order> {\n      notImplemented(\"orders.cancel\");\n    },\n    async updateNotes(_orderId: string, _notes: string): Promise<Order> {\n      notImplemented(\"orders.updateNotes\");\n    },\n    async getFulfillments(_orderId: string): Promise<OrderFulfillment[]> {\n      return [];\n    },\n    async getRefunds(_orderId: string): Promise<OrderRefund[]> {\n      return [];\n    },\n    async requestRefund(_orderId: string, _items: Array<{ orderItemId: string; quantity: number }>, _reason: string): Promise<OrderRefund> {\n      notImplemented(\"orders.requestRefund\");\n    },\n    async getCustomerOrders(_customerId: string, _options?: Parameters<IOrderService[\"getCustomerOrders\"]>[1]): Promise<PaginatedResponse<Order>> {\n      return {\n        items: [],\n        total: 0,\n        page: 1,\n        pageSize: 20,\n        hasNextPage: false,\n        hasPreviousPage: false,\n      };\n    },\n    async getCompanyOrders(_companyId: string, _options?: Parameters<IOrderService[\"getCompanyOrders\"]>[1]): Promise<PaginatedResponse<Order>> {\n      return {\n        items: [],\n        total: 0,\n        page: 1,\n        pageSize: 20,\n        hasNextPage: false,\n        hasPreviousPage: false,\n      };\n    },\n    async reorder(_orderId: string): Promise<Cart> {\n      notImplemented(\"orders.reorder\");\n    },\n    async getInvoiceUrl(_orderId: string): Promise<string> {\n      notImplemented(\"orders.getInvoiceUrl\");\n    },\n    async track(_orderId: string): Promise<{ status: string }> {\n      notImplemented(\"orders.track\");\n    },\n  };\n}\n\n/**\n * Create a stub customer service\n *\n * @remarks\n * Sage manages business contacts but not e-commerce customers.\n * Customer auth should be done via the primary e-commerce backend.\n */\nfunction createStubCustomerService(): ICustomerService {\n  return {\n    async getCurrent(): Promise<Customer> {\n      notImplemented(\"customers.getCurrent\");\n    },\n    async get(_id: string): Promise<Customer> {\n      notImplemented(\"customers.get\");\n    },\n    async getByEmail(_email: string): Promise<Customer> {\n      notImplemented(\"customers.getByEmail\");\n    },\n    async update(_customerId: string, _input: Parameters<ICustomerService[\"update\"]>[1]): Promise<Customer> {\n      notImplemented(\"customers.update\");\n    },\n    async register(_email: string, _password: string, _profile?: Parameters<ICustomerService[\"register\"]>[2]): Promise<AuthResult> {\n      notImplemented(\"customers.register\");\n    },\n    async login(_email: string, _password: string): Promise<AuthResult> {\n      notImplemented(\"customers.login\");\n    },\n    async logout(): Promise<void> {\n      // No-op\n    },\n    async refreshToken(_refreshToken: string): Promise<AuthResult> {\n      notImplemented(\"customers.refreshToken\");\n    },\n    async requestPasswordReset(_email: string): Promise<PasswordResetResult> {\n      return { success: false, message: \"Password reset not available via Sage\" };\n    },\n    async resetPassword(_token: string, _newPassword: string): Promise<{ success: boolean }> {\n      return { success: false };\n    },\n    async changePassword(_currentPassword: string, _newPassword: string): Promise<{ success: boolean }> {\n      return { success: false };\n    },\n    async listAddresses(_customerId: string): Promise<CustomerAddress[]> {\n      return [];\n    },\n    async getAddress(_customerId: string, _addressId: string): Promise<CustomerAddress> {\n      notImplemented(\"customers.getAddress\");\n    },\n    async addAddress(_customerId: string, _input: Parameters<ICustomerService[\"addAddress\"]>[1]): Promise<CustomerAddress> {\n      notImplemented(\"customers.addAddress\");\n    },\n    async updateAddress(_customerId: string, _addressId: string, _input: Parameters<ICustomerService[\"updateAddress\"]>[2]): Promise<CustomerAddress> {\n      notImplemented(\"customers.updateAddress\");\n    },\n    async deleteAddress(_customerId: string, _addressId: string): Promise<void> {\n      // No-op\n    },\n    async setDefaultAddress(_customerId: string, _addressId: string, _type: \"shipping\" | \"billing\"): Promise<CustomerAddress> {\n      notImplemented(\"customers.setDefaultAddress\");\n    },\n    async getDefaultShippingAddress(_customerId: string): Promise<CustomerAddress | null> {\n      return null;\n    },\n    async getDefaultBillingAddress(_customerId: string): Promise<CustomerAddress | null> {\n      return null;\n    },\n    async delete(_customerId: string): Promise<void> {\n      notImplemented(\"customers.delete\");\n    },\n  };\n}\n\n/**\n * Sage Commerce Client configuration\n */\nexport interface SageCommerceClientConfig extends CommerceClientConfig {\n  /** Sage company ID (required) */\n  companyId: string;\n  /** Sage API version */\n  apiVersion?: string;\n  /** Default currency */\n  currency?: string;\n}\n\n/**\n * Sage Commerce Client\n *\n * Implements ICommerceClient for Sage ERP integration.\n *\n * @example\n * ```typescript\n * import { SageCommerceClient } from \"@maison/api-sage\";\n *\n * const client = new SageCommerceClient({\n *   baseUrl: \"https://sage-proxy.example.com\",\n *   companyId: \"COMPANY_001\",\n *   authToken: \"your-api-token\"\n * });\n *\n * // Fetch products from Sage\n * const products = await client.products.list();\n *\n * // Get inventory for specific products\n * const inventory = await client.products.getInventoryBulk([\"SKU1\", \"SKU2\"]);\n * ```\n */\nexport class SageCommerceClient implements ICommerceClient {\n  public readonly name = \"sage\";\n  public readonly version = \"1.0.0\";\n  public readonly provider: ApiProvider = \"sage\";\n  public readonly config: CommerceClientConfig;\n\n  private readonly sageClient: SageApiClient;\n  private authToken: string | null = null;\n  private b2bContext: { companyId?: string; employeeId?: string } | null = null;\n\n  // Services\n  public readonly products: IProductService;\n  public readonly categories: ICategoryService;\n  public readonly cart: ICartService;\n  public readonly orders: IOrderService;\n  public readonly customers: ICustomerService;\n  public readonly b2b: IB2BServices | null = null; // Sage doesn't support B2B workflow\n\n  constructor(config: SageCommerceClientConfig) {\n    this.config = config;\n\n    // Create Sage-specific config\n    const sageConfig: SageConfig = {\n      baseUrl: config.baseUrl,\n      companyId: config.companyId,\n      ...(config.apiVersion && { apiVersion: config.apiVersion }),\n      ...(config.currency && { currency: config.currency }),\n      ...(config.authToken && { authToken: config.authToken }),\n      ...(config.timeout !== undefined && { timeout: config.timeout }),\n      ...(config.defaultHeaders && { defaultHeaders: config.defaultHeaders }),\n    };\n\n    this.sageClient = new SageApiClient(sageConfig);\n\n    if (config.authToken) {\n      this.authToken = config.authToken;\n    }\n\n    // Initialize services\n    this.products = new SageProductService(this.sageClient);\n    this.categories = createStubCategoryService();\n    this.cart = createStubCartService();\n    this.orders = createStubOrderService();\n    this.customers = createStubCustomerService();\n  }\n\n  /**\n   * Initialize the client (verify connection)\n   */\n  async initialize(): Promise<void> {\n    await this.sageClient.initialize();\n  }\n\n  /**\n   * Check if client is configured\n   */\n  isConfigured(): boolean {\n    return this.sageClient.isConfigured();\n  }\n\n  /**\n   * Health check\n   */\n  async healthCheck(): Promise<boolean> {\n    return this.sageClient.healthCheck();\n  }\n\n  /**\n   * Set authentication token\n   */\n  setAuthToken(token: string): void {\n    this.authToken = token;\n    // Note: SageApiClient handles auth via config, would need refactoring\n    // to support dynamic token changes\n  }\n\n  /**\n   * Clear authentication\n   */\n  clearAuth(): void {\n    this.authToken = null;\n  }\n\n  /**\n   * Get current auth token\n   */\n  getAuthToken(): string | null {\n    return this.authToken;\n  }\n\n  /**\n   * Set B2B context\n   *\n   * @remarks\n   * Sage doesn't have native B2B workflow, but we track context\n   * for potential filtering/reporting purposes.\n   */\n  setB2BContext(companyId: string, employeeId?: string): void {\n    this.b2bContext = { companyId };\n    if (employeeId) {\n      this.b2bContext.employeeId = employeeId;\n    }\n  }\n\n  /**\n   * Clear B2B context\n   */\n  clearB2BContext(): void {\n    this.b2bContext = null;\n  }\n\n  /**\n   * Get current B2B context\n   */\n  getB2BContext(): { companyId?: string; employeeId?: string } | null {\n    return this.b2bContext;\n  }\n\n  /**\n   * Check if B2B is enabled\n   *\n   * @remarks\n   * Always returns false for Sage as it doesn't support B2B workflow.\n   */\n  isB2BEnabled(): boolean {\n    return false;\n  }\n\n  /**\n   * Get underlying HTTP client\n   */\n  getHttpClient(): {\n    get<T>(path: string, options?: Record<string, unknown>): Promise<T>;\n    post<T>(path: string, body?: unknown, options?: Record<string, unknown>): Promise<T>;\n    put<T>(path: string, body?: unknown, options?: Record<string, unknown>): Promise<T>;\n    patch<T>(path: string, body?: unknown, options?: Record<string, unknown>): Promise<T>;\n    delete<T>(path: string, options?: Record<string, unknown>): Promise<T>;\n  } {\n    return {\n      get: async <T>(path: string, options?: Record<string, unknown>) => {\n        const response = await this.sageClient.get<T>(path, options);\n        return response.data;\n      },\n      post: async <T>(path: string, body?: unknown, _options?: Record<string, unknown>) => {\n        const response = await this.sageClient.post<T>(path, body);\n        return response.data;\n      },\n      put: async <T>(path: string, body?: unknown, _options?: Record<string, unknown>) => {\n        const response = await this.sageClient.put<T>(path, body);\n        return response.data;\n      },\n      patch: async <T>(path: string, body?: unknown, _options?: Record<string, unknown>) => {\n        const response = await this.sageClient.patch<T>(path, body);\n        return response.data;\n      },\n      delete: async <T>(path: string, _options?: Record<string, unknown>) => {\n        const response = await this.sageClient.delete<T>(path);\n        return response.data;\n      },\n    };\n  }\n\n  /**\n   * Sync products from Sage (convenience method)\n   *\n   * @remarks\n   * Triggers a full product sync from Sage ERP.\n   */\n  async syncProducts(): Promise<{ synced: number; errors: readonly string[] }> {\n    return this.sageClient.syncProducts();\n  }\n\n  /**\n   * Update inventory (convenience method)\n   *\n   * @remarks\n   * Updates inventory quantity in Sage for a specific product/warehouse.\n   */\n  async updateInventory(productId: string, warehouseId: string, quantity: number) {\n    return this.sageClient.updateInventory(productId, warehouseId, quantity);\n  }\n}\n"]}