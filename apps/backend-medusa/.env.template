# ==============================================================================
# MEDUSA V2 BACKEND - ENVIRONMENT VARIABLES
# ==============================================================================
# Copy this file to .env.local and configure for your environment
# DO NOT commit .env.local to version control

# ==============================================================================
# DATABASE
# ==============================================================================
# PostgreSQL connection string
# Format: postgres://user:password@host:port/database
DATABASE_URL=postgres://postgres:postgres@localhost:5432/medusa_bijoux

# ==============================================================================
# SECURITY SECRETS
# ==============================================================================
# JWT secret for API authentication (generate a secure random string)
JWT_SECRET=your-super-secret-jwt-token-min-32-chars

# Cookie secret for session management (generate a secure random string)
COOKIE_SECRET=your-super-secret-cookie-token-min-32-chars

# ==============================================================================
# CORS CONFIGURATION
# ==============================================================================
# Storefront URL(s) - comma separated for multiple origins
STORE_CORS=http://localhost:3000

# Admin panel URL(s)
ADMIN_CORS=http://localhost:7001

# Authentication endpoints URL(s)
AUTH_CORS=http://localhost:3000,http://localhost:7001

# ==============================================================================
# ADMIN PANEL
# ==============================================================================
# Backend URL that admin panel uses to make API calls
MEDUSA_BACKEND_URL=http://localhost:9000

# Set to "true" to disable admin panel (e.g., in production API-only mode)
DISABLE_ADMIN=false

# ==============================================================================
# REDIS (OPTIONAL - for production)
# ==============================================================================
# Redis connection URL for caching, events, and workflow engine
# REDIS_URL=redis://localhost:6379

# ==============================================================================
# WORKER MODE
# ==============================================================================
# Options: "shared" | "worker" | "server"
# - shared: API and background workers in same process (development)
# - worker: Dedicated worker process (production)
# - server: API server only (production with separate worker)
MEDUSA_WORKER_MODE=shared

# ==============================================================================
# FILE STORAGE - MinIO (S3-compatible local storage)
# ==============================================================================
# MinIO est une alternative open-source a AWS S3
# Lance via docker-compose (voir docker-compose.yml a la racine du monorepo)
#
# Console MinIO: http://localhost:9001
# API Endpoint: http://localhost:9002
#
# Pour activer le stockage S3/MinIO, decommenter les lignes ci-dessous:

# Nom du bucket (cree automatiquement par le container minio-init)
S3_FILE_URL=http://localhost:9002/medusa-media
S3_BUCKET=medusa-media
S3_REGION=us-east-1

# Endpoint personnalise pour MinIO (ne pas utiliser pour AWS S3)
S3_ENDPOINT=http://localhost:9002

# Identifiants MinIO (par defaut pour le developpement)
S3_ACCESS_KEY_ID=minioadmin
S3_SECRET_ACCESS_KEY=minioadmin

# Forcer le path-style pour MinIO (important pour la compatibilite)
# AWS S3 utilise le virtual-hosted style par defaut, MinIO utilise path-style
S3_FORCE_PATH_STYLE=true

# ==============================================================================
# FILE STORAGE - AWS S3 (Production)
# ==============================================================================
# Pour utiliser AWS S3 en production, commenter la section MinIO ci-dessus
# et decommenter/configurer les lignes suivantes:
#
# S3_FILE_URL=https://your-bucket.s3.amazonaws.com
# S3_BUCKET=your-bucket-name
# S3_REGION=us-east-1
# S3_ACCESS_KEY_ID=your-aws-access-key
# S3_SECRET_ACCESS_KEY=your-aws-secret-key
# Ne pas definir S3_ENDPOINT ni S3_FORCE_PATH_STYLE pour AWS S3

# ==============================================================================
# ELASTIC APP SEARCH - Search Engine
# ==============================================================================
# App Search est une solution de recherche enterprise d'Elastic
#
# Documentation: https://www.elastic.co/guide/en/app-search/current/index.html
#
# Pour activer App Search, decommenter les lignes ci-dessous:

# Mode de recherche: "appsearch"
# SEARCH_PROVIDER=appsearch

# Endpoint App Search (format: https://xxx.ent-search.cloud.es.io)
# APPSEARCH_ENDPOINT=https://your-deployment.ent-search.cloud.es.io

# Cle API privee pour indexation (operations admin)
# APPSEARCH_PRIVATE_KEY=private-xxxxxxxxxxxxx

# Cle API publique pour recherche (utilisee par le frontend via proxy)
# APPSEARCH_PUBLIC_KEY=search-xxxxxxxxxxxxx

# Nom du moteur App Search (cree automatiquement si necessaire)
# APPSEARCH_ENGINE=bijoux-products

# Pourcentage de trafic vers App Search (0-100)
# APPSEARCH_TRAFFIC_PERCENTAGE=100

# ==============================================================================
# EMAIL NOTIFICATIONS (OPTIONAL)
# ==============================================================================
# SendGrid configuration
# SENDGRID_API_KEY=your-sendgrid-api-key
# SENDGRID_FROM=noreply@yourdomain.com

# ==============================================================================
# STRIPE PAYMENTS (OPTIONAL)
# ==============================================================================
# STRIPE_API_KEY=sk_test_...
# STRIPE_WEBHOOK_SECRET=whsec_...

# ==============================================================================
# NODE ENVIRONMENT
# ==============================================================================
NODE_ENV=development
